name: CI/CD Pipeline\n\non: [push, pull_request]\n\njobs:\n  train_build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v1\n      - name: Build Docker image\n        run: docker build . -t my-model:latest\n\n  test:\n    runs-on: ubuntu-latest\n    needs: train_build\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Run tests\n        run: |\n          docker run --rm my-model:latest pytest tests/\n\n  deploy:\n    runs-on: ubuntu-latest\n    needs: test\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v2\n      - name: Log in to Docker Hub\n        run: |\n          echo ${{ secrets.DOCKER_PASSWORD }} | docker login -u ${{ secrets.DOCKER_USERNAME }} --password-stdin\n      - name: Deploy to production\n        run: |\n          docker tag my-model:latest myusername/my-model:latest\n          docker push myusername/my-model:latest\n